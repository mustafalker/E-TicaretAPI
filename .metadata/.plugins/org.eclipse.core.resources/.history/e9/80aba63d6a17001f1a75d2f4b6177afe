package com.example.ETicaretAPI.RestApi;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import com.example.ETicaretAPI.BLL.IETicaretUserServiceBLL;
import com.example.ETicaretAPI.Entities.User_Dependency.User;

@RestController
@RequestMapping("/api/users")
public class ETicaretUsersController {

    private final IETicaretUserServiceBLL userServiceBLL;

    @Autowired
    public ETicaretUsersController(IETicaretUserServiceBLL userServiceBLL) {
        this.userServiceBLL = userServiceBLL;
    }

    @GetMapping
    public List<User> getAllUsers() {
        return userServiceBLL.getAll();
    }

    @GetMapping("/{id}")
    public User getUserById(@PathVariable int id) {
        return userServiceBLL.getById(id);
    }

    @PostMapping
    public void addUser(@RequestBody User user) {
        userServiceBLL.add(user);
    }

    @PutMapping("/{id}")
    public void updateUser(@PathVariable int id, @RequestBody User user) {
        User existingUser = userServiceBLL.getById(id);
        if (existingUser != null) {
            user.setUserId(id);
            userServiceBLL.update(user);
        }
    }

    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable int id) {
        User existingUser = userServiceBLL.getById(id);
        if (existingUser != null) {
            userServiceBLL.delete(existingUser);
        }
    }
}
