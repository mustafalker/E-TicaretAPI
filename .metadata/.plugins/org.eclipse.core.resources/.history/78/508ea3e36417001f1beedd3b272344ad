package com.example.ETicaretAPI.DAL;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.example.ETicaretAPI.Entities.Product_Dependency.Category;

import jakarta.persistence.EntityManager;
import jakarta.persistence.TypedQuery;

public class ETicaretCategoryServiceDAL implements IETicaretCategoryServiceDAL {

	private final EntityManager entityManager;
	@Autowired
    public ETicaretCategoryServiceDAL(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
	
	@Override
	public List<Category> getAll() {
		TypedQuery<Category> query = entityManager.createQuery("Select c From Category c", Category.class);
		return query.getResultList();
	}

	@Override
	public void add(Category category) {
		entityManager.persist(category);
	}

	@Override
	public void update(Category category) {
		entityManager.merge(category);
	}

	@Override
	public void delete(Category category) {
		entityManager.remove(entityManager.contains(category) ? category : entityManager.merge(category));
	}

	@Override
	public Category getById(int id) {
		return entityManager.find(Category.class , id);
	}
	
}
